{"intl":"var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n","src":"/** @module wdg.modal */require( 'wdg.modal', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n    /**\r\n * @module wdg.modal\r\n *\r\n * @description\r\n *\r\n *\r\n * @example\r\n * var mod = require('wdg.modal');\r\n */\r\nvar $ = require(\"dom\");\r\nvar DB = require(\"tfw.data-binding\");\r\nvar Flex = require(\"wdg.flex\");\r\nvar Button = require(\"wdg.button\");\r\n\r\n\r\nfunction Modal( opts ) {\r\n    var that = this;\r\n\r\n    var body = $.div( 'theme-elevation-24', 'theme-color-bg-B3' );\r\n    var cell = $.div( [body] );\r\n    var elem = $.elem( this, 'div', 'wdg-modal', [cell] );\r\n\r\n    DB.prop(this, 'content')(function(v) {\r\n        $.clear( body );\r\n        if (Array.isArray( v )) {\r\n            v.forEach(function (itm) {\r\n                $.add( body, itm );\r\n            });\r\n        } else if (typeof v !== 'undefined' && v !== null){\r\n            $.add( body, v );\r\n        }\r\n    });\r\n    DB.propAddClass(this, 'padding');\r\n    DB.propAddClass(this, 'scroll');\r\n    DB.propAddClass(this, 'wide');\r\n    DB.propBoolean(this, 'visible')(function(v) {\r\n        if( v ) {\r\n            that.attach();\r\n        }\r\n        else {\r\n            that.detach();\r\n        }\r\n    });\r\n\r\n    opts = DB.extend({\r\n        visible: false, content: [], padding: false, scroll: true\r\n    }, opts, this );\r\n}\r\n\r\n\r\n/**\r\n * @member Modal.refresh\r\n * Refresh the content.\r\n */\r\nModal.prototype.refresh = function() {\r\n    DB.fire( this, 'content' );\r\n    return this;\r\n};\r\n\r\n/**\r\n * @member Modal.attach\r\n * Append element to body.\r\n */\r\nModal.prototype.attach = function() {\r\n    var that = this;\r\n    \r\n    if( this._timeoutDetach ) {\r\n        window.clearTimeout( this._timeoutDetach );\r\n        delete this._timeoutDetach;\r\n    }\r\n    document.body.appendChild( this.element );\r\n    DB.set( this, 'visible', true );\r\n    $.addClass( this, 'fadeout' );\r\n    window.setTimeout(function() {\r\n        $.removeClass( that, 'fadeout' );\r\n    });\r\n};\r\n\r\n/**\r\n * @member Modal.detach\r\n * Remove element from body.\r\n */\r\nModal.prototype.detach = function() {\r\n    var that = this;\r\n\r\n    window.setTimeout(function() {\r\n        $.addClass( that, 'fadeout' );\r\n    });\r\n    this._timeoutDetach = window.setTimeout(function() {\r\n        delete this._timeoutDetach;\r\n        DB.set( that, 'visible', false );\r\n        $.detach( that.element );\r\n    }, 250);\r\n};\r\n\r\n/**\r\n * @function Modal.comfirm\r\n */\r\nModal.confirm = function( content, onYes, onNo ) {\r\n    var btnNo = Button.No();\r\n    var btnYes = Button.Yes('warning');\r\n    var buttons = $.div([$.tag('hr'), new Flex({ content: [btnNo, btnYes] })]);\r\n    if (typeof content === 'string' && content.substr(0, 6) == '<html>') {\r\n        // This is HTML code.\r\n        var html = content.substr(6);\r\n        content = $.div();\r\n        content.innerHTML = html;\r\n    }\r\n    var modal = new Modal({ content: $.div([content, buttons]), padding: true });\r\n    modal.attach();\r\n\r\n    btnNo.on(function() {\r\n        modal.detach();\r\n        if (typeof onNo === 'function') {\r\n            onNo();\r\n        }\r\n    });\r\n    btnYes.on(function() {\r\n        if (typeof onYes === 'function') {\r\n            var caption = onYes();\r\n            if( typeof caption !== 'string' ) modal.detach();\r\n            else {\r\n                btnNo.visible = false;\r\n                btnYes.waitOn( caption );\r\n            }\r\n        } else {\r\n            modal.detach();\r\n        }\r\n    });\r\n    return modal;\r\n};\r\n\r\n/**\r\n * Display a message with an OK button.\r\n */\r\nModal.alert = function(content, onOK) {\r\n    var btnOK = Button.Ok('simple');\r\n    var buttons = $.div([$.tag('hr'), new Flex({ content: [btnOK] })]);\r\n    if (typeof content === 'string' && content.substr(0, 6) == '<html>') {\r\n        // This is HTML code.\r\n        var html = content.substr(6);\r\n        content = $.div();\r\n        content.innerHTML = html;\r\n    }\r\n    var modal = new Modal({ content: $.div([content, buttons]), padding: true });\r\n    modal.attach();\r\n\r\n    btnOK.on(function() {\r\n        modal.detach();\r\n        if (typeof onOK === 'function') onOK();\r\n    });\r\n    return modal;\r\n};\r\n\r\n\r\nmodule.exports = Modal;\r\n\r\n\r\n  \r\nmodule.exports._ = _;\n/**\n * @module wdg.modal\n * @see module:$\n * @see module:dom\n * @see module:tfw.data-binding\n * @see module:wdg.flex\n * @see module:wdg.button\n\n */\n});","zip":"require(\"wdg.modal\",function(t,e,n){function i(t){var e=this,n=a.div(\"theme-elevation-24\",\"theme-color-bg-B3\"),i=a.div([n]);a.elem(this,\"div\",\"wdg-modal\",[i]);d.prop(this,\"content\")(function(t){a.clear(n),Array.isArray(t)?t.forEach(function(t){a.add(n,t)}):\"undefined\"!=typeof t&&null!==t&&a.add(n,t)}),d.propAddClass(this,\"padding\"),d.propAddClass(this,\"scroll\"),d.propAddClass(this,\"wide\"),d.propBoolean(this,\"visible\")(function(t){t?e.attach():e.detach()}),t=d.extend({visible:!1,content:[],padding:!1,scroll:!0},t,this)}var o=function(){function e(){return i(n,arguments)}var n={en:{}},i=t(\"$\").intl;return e.all=n,e}(),a=t(\"dom\"),d=t(\"tfw.data-binding\"),r=t(\"wdg.flex\"),s=t(\"wdg.button\");i.prototype.refresh=function(){return d.fire(this,\"content\"),this},i.prototype.attach=function(){var t=this;this._timeoutDetach&&(window.clearTimeout(this._timeoutDetach),delete this._timeoutDetach),document.body.appendChild(this.element),d.set(this,\"visible\",!0),a.addClass(this,\"fadeout\"),window.setTimeout(function(){a.removeClass(t,\"fadeout\")})},i.prototype.detach=function(){var t=this;window.setTimeout(function(){a.addClass(t,\"fadeout\")}),this._timeoutDetach=window.setTimeout(function(){delete this._timeoutDetach,d.set(t,\"visible\",!1),a.detach(t.element)},250)},i.confirm=function(t,e,n){var o=s.No(),d=s.Yes(\"warning\"),c=a.div([a.tag(\"hr\"),new r({content:[o,d]})]);if(\"string\"==typeof t&&\"<html>\"==t.substr(0,6)){var u=t.substr(6);t=a.div(),t.innerHTML=u}var h=new i({content:a.div([t,c]),padding:!0});return h.attach(),o.on(function(){h.detach(),\"function\"==typeof n&&n()}),d.on(function(){if(\"function\"==typeof e){var t=e();\"string\"!=typeof t?h.detach():(o.visible=!1,d.waitOn(t))}else h.detach()}),h},i.alert=function(t,e){var n=s.Ok(\"simple\"),o=a.div([a.tag(\"hr\"),new r({content:[n]})]);if(\"string\"==typeof t&&\"<html>\"==t.substr(0,6)){var d=t.substr(6);t=a.div(),t.innerHTML=d}var c=new i({content:a.div([t,o]),padding:!0});return c.attach(),n.on(function(){c.detach(),\"function\"==typeof e&&e()}),c},e.exports=i,e.exports._=o});\n//# sourceMappingURL=wdg.modal.js.map","map":{"version":3,"file":"wdg.modal.js.map","sources":["wdg.modal.js"],"sourcesContent":["/** @module wdg.modal */require( 'wdg.modal', function(require, module, exports) { var _=function(){var D={\"en\":{}},X=require(\"$\").intl;function _(){return X(D,arguments);}_.all=D;return _}();\r\n    /**\r\n * @module wdg.modal\r\n *\r\n * @description\r\n *\r\n *\r\n * @example\r\n * var mod = require('wdg.modal');\r\n */\r\nvar $ = require(\"dom\");\r\nvar DB = require(\"tfw.data-binding\");\r\nvar Flex = require(\"wdg.flex\");\r\nvar Button = require(\"wdg.button\");\r\n\r\n\r\nfunction Modal( opts ) {\r\n    var that = this;\r\n\r\n    var body = $.div( 'theme-elevation-24', 'theme-color-bg-B3' );\r\n    var cell = $.div( [body] );\r\n    var elem = $.elem( this, 'div', 'wdg-modal', [cell] );\r\n\r\n    DB.prop(this, 'content')(function(v) {\r\n        $.clear( body );\r\n        if (Array.isArray( v )) {\r\n            v.forEach(function (itm) {\r\n                $.add( body, itm );\r\n            });\r\n        } else if (typeof v !== 'undefined' && v !== null){\r\n            $.add( body, v );\r\n        }\r\n    });\r\n    DB.propAddClass(this, 'padding');\r\n    DB.propAddClass(this, 'scroll');\r\n    DB.propAddClass(this, 'wide');\r\n    DB.propBoolean(this, 'visible')(function(v) {\r\n        if( v ) {\r\n            that.attach();\r\n        }\r\n        else {\r\n            that.detach();\r\n        }\r\n    });\r\n\r\n    opts = DB.extend({\r\n        visible: false, content: [], padding: false, scroll: true\r\n    }, opts, this );\r\n}\r\n\r\n\r\n/**\r\n * @member Modal.refresh\r\n * Refresh the content.\r\n */\r\nModal.prototype.refresh = function() {\r\n    DB.fire( this, 'content' );\r\n    return this;\r\n};\r\n\r\n/**\r\n * @member Modal.attach\r\n * Append element to body.\r\n */\r\nModal.prototype.attach = function() {\r\n    var that = this;\r\n    \r\n    if( this._timeoutDetach ) {\r\n        window.clearTimeout( this._timeoutDetach );\r\n        delete this._timeoutDetach;\r\n    }\r\n    document.body.appendChild( this.element );\r\n    DB.set( this, 'visible', true );\r\n    $.addClass( this, 'fadeout' );\r\n    window.setTimeout(function() {\r\n        $.removeClass( that, 'fadeout' );\r\n    });\r\n};\r\n\r\n/**\r\n * @member Modal.detach\r\n * Remove element from body.\r\n */\r\nModal.prototype.detach = function() {\r\n    var that = this;\r\n\r\n    window.setTimeout(function() {\r\n        $.addClass( that, 'fadeout' );\r\n    });\r\n    this._timeoutDetach = window.setTimeout(function() {\r\n        delete this._timeoutDetach;\r\n        DB.set( that, 'visible', false );\r\n        $.detach( that.element );\r\n    }, 250);\r\n};\r\n\r\n/**\r\n * @function Modal.comfirm\r\n */\r\nModal.confirm = function( content, onYes, onNo ) {\r\n    var btnNo = Button.No();\r\n    var btnYes = Button.Yes('warning');\r\n    var buttons = $.div([$.tag('hr'), new Flex({ content: [btnNo, btnYes] })]);\r\n    if (typeof content === 'string' && content.substr(0, 6) == '<html>') {\r\n        // This is HTML code.\r\n        var html = content.substr(6);\r\n        content = $.div();\r\n        content.innerHTML = html;\r\n    }\r\n    var modal = new Modal({ content: $.div([content, buttons]), padding: true });\r\n    modal.attach();\r\n\r\n    btnNo.on(function() {\r\n        modal.detach();\r\n        if (typeof onNo === 'function') {\r\n            onNo();\r\n        }\r\n    });\r\n    btnYes.on(function() {\r\n        if (typeof onYes === 'function') {\r\n            var caption = onYes();\r\n            if( typeof caption !== 'string' ) modal.detach();\r\n            else {\r\n                btnNo.visible = false;\r\n                btnYes.waitOn( caption );\r\n            }\r\n        } else {\r\n            modal.detach();\r\n        }\r\n    });\r\n    return modal;\r\n};\r\n\r\n/**\r\n * Display a message with an OK button.\r\n */\r\nModal.alert = function(content, onOK) {\r\n    var btnOK = Button.Ok('simple');\r\n    var buttons = $.div([$.tag('hr'), new Flex({ content: [btnOK] })]);\r\n    if (typeof content === 'string' && content.substr(0, 6) == '<html>') {\r\n        // This is HTML code.\r\n        var html = content.substr(6);\r\n        content = $.div();\r\n        content.innerHTML = html;\r\n    }\r\n    var modal = new Modal({ content: $.div([content, buttons]), padding: true });\r\n    modal.attach();\r\n\r\n    btnOK.on(function() {\r\n        modal.detach();\r\n        if (typeof onOK === 'function') onOK();\r\n    });\r\n    return modal;\r\n};\r\n\r\n\r\nmodule.exports = Modal;\r\n\r\n\r\n  \r\nmodule.exports._ = _;\n});"],"names":["require","module","exports","Modal","opts","that","this","body","$","div","cell","elem","DB","prop","v","clear","Array","isArray","forEach","itm","add","propAddClass","propBoolean","attach","detach","extend","visible","content","padding","scroll","_","X","D","arguments","en","intl","all","Flex","Button","prototype","refresh","fire","_timeoutDetach","window","clearTimeout","document","appendChild","element","set","addClass","setTimeout","removeClass","confirm","onYes","onNo","btnNo","No","btnYes","Yes","buttons","tag","substr","html","innerHTML","modal","on","caption","waitOn","alert","onOK","btnOK","Ok"],"mappings":"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"},"dependencies":["mod/$","mod/dom","mod/tfw.data-binding","mod/wdg.flex","mod/wdg.button"]}